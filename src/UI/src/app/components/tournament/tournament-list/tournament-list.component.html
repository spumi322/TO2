<div class="tournament-list-container">
  <div class="tournament-list-card">
    <!-- Header -->
    <div class="list-header">
      <h2>Tournaments</h2>
    </div>

    <!-- Tournament sections -->
    <div class="tournament-sections" *ngIf="groupedTournaments$ | async as tournaments">

      <!-- Upcoming Section -->
      <section class="tournament-section" *ngIf="tournaments.upcoming.length">
        <h3 class="section-title">Upcoming Tournaments</h3>
        <div class="tournament-grid">
          <ng-container *ngFor="let tournament of tournaments.upcoming; trackBy: trackByTournament">
            <ng-container *ngTemplateOutlet="tournamentCard; context: { $implicit: tournament }"></ng-container>
          </ng-container>
        </div>
      </section>

      <!-- Ongoing Section -->
      <section class="tournament-section" *ngIf="tournaments.ongoing.length">
        <h3 class="section-title">Ongoing Tournaments</h3>
        <div class="tournament-grid">
          <ng-container *ngFor="let tournament of tournaments.ongoing; trackBy: trackByTournament">
            <ng-container *ngTemplateOutlet="tournamentCard; context: { $implicit: tournament }"></ng-container>
          </ng-container>
        </div>
      </section>

      <!-- Finished Section -->
      <section class="tournament-section" *ngIf="tournaments.finished.length">
        <h3 class="section-title">Finished Tournaments</h3>
        <div class="tournament-grid">
          <ng-container *ngFor="let tournament of tournaments.finished; trackBy: trackByTournament">
            <ng-container *ngTemplateOutlet="tournamentCard; context: { $implicit: tournament }"></ng-container>
          </ng-container>
        </div>
      </section>
    </div>
  </div>
</div>

<!-- Reusable card template  -->
<ng-template #tournamentCard let-tournament>
  <div class="tournament-card" (click)="goToDetails(tournament.id)">
    <div class="card-header">
      <img
        class="tournament-logo"
        src="../../../../assets/cup_logo.png"
        alt="Tournament logo"
      />
      <h4 class="tournament-title">{{ tournament.name }}</h4>
    </div>

    <p class="tournament-format">{{ FormatConfig.getFormatLabel(tournament.format) }}</p>

    <div class="card-footer">
      <span class="team-info">Teams: {{ tournament.teams.length }} / {{ tournament.maxTeams }}</span>
      <span class="status-text">{{ StatusConfig.getStatusLabel(tournament.status) }}</span>
    </div>
  </div>
</ng-template>
