<mat-card class="create-tournament-card">
  <mat-horizontal-stepper [linear]="true" #stepper>
    <!-- Step 1: Basic Details -->
    <mat-step [stepControl]="basicInfoGroup">
      <form [formGroup]="basicInfoGroup">
        <ng-template matStepLabel>Basic Details</ng-template>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Tournament Name</mat-label>
          <input matInput formControlName="name" placeholder="Enter tournament name" required />
          <mat-error *ngIf="basicInfoGroup.get('name')?.hasError('required')">Tournament name is required.</mat-error>
          <mat-error *ngIf="basicInfoGroup.get('name')?.hasError('minlength')">Must be at least 4 characters.</mat-error>
          <mat-error *ngIf="basicInfoGroup.get('name')?.hasError('nonUnique')">This tournament name is already taken.</mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Description (Prize Pool, etc.)</mat-label>
          <textarea matInput formControlName="description" placeholder="Enter description, prize pool, etc."></textarea>
        </mat-form-field>

        <div class="button-row">
          <button mat-button matStepperNext [disabled]="!basicInfoGroup.valid">Next</button>
        </div>
      </form>
    </mat-step>

    <!-- Step 2: Tournament Settings -->
    <mat-step [stepControl]="settingsGroup">
      <form [formGroup]="settingsGroup">
        <ng-template matStepLabel>Tournament Settings</ng-template>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Max Teams</mat-label>
          <input matInput type="number" formControlName="maxTeams" placeholder="Enter maximum teams" required />
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Format</mat-label>
          <mat-select formControlName="format" required>
            <!-- A disabled option as a prompt -->
            <mat-option value="" disabled>Select format</mat-option>
            <mat-option *ngFor="let option of formatOptions" [value]="option.value">
              {{ option.label }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="settingsGroup.get('format')?.hasError('required')">Format is required.</mat-error>
        </mat-form-field>

        <div class="button-row">
          <button mat-button matStepperPrevious>Back</button>
          <button mat-button matStepperNext [disabled]="!settingsGroup.valid">Next</button>
        </div>
      </form>
    </mat-step>

    <!-- Step 3: Schedule -->
    <mat-step [stepControl]="scheduleGroup">
      <form [formGroup]="scheduleGroup">
        <ng-template matStepLabel>Schedule</ng-template>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Start Date</mat-label>
          <input matInput [matDatepicker]="picker" formControlName="startDate" required />
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <div class="button-row">
          <button mat-button matStepperPrevious>Back</button>
          <button mat-button color="primary" (click)="onSubmit()" [disabled]="!scheduleGroup.valid">Submit</button>
        </div>
      </form>
    </mat-step>
  </mat-horizontal-stepper>
</mat-card>
